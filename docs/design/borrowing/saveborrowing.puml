@startuml
start

:Validated();
:Check if txtID is Empty;

if (txtID is Empty?) then (yes)
  :Retrieve Account ID;
  :Retrieve Book ID;
  :Retrieve Status ID;
  :Create Borrow Object;
  :Set RefundAt and BorrowAt for Borrow Object;
  :Add Borrow to BorrowEntity;
  if (Add Success?) then (yes)
    :Show alert "Added Successfully!";
  else (no)
    :Show alert "Added Fail!";
  endif
else (no)
  :Retrieve Account ID;
  :Retrieve Book ID;
  :Retrieve Status ID;
  :Retrieve Manage ID and ID from Table;
  :Create Borrow Object;
  :Set ID, RefundAt, BorrowAt, StatusId, ManageId, AccountID, BookID for Borrow Object;
  :Update Borrow in BorrowEntity;
  if (Update Success?) then (yes)
    :Show alert "Updated Successfully!";
  else (no)
    :Show alert "Updated Fail!";
  endif
endif

:Refresh UI;
stop

@enduml
